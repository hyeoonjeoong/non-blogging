<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blogging</title>

    
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
      * {
        font-family: "Noto Serif KR", serif;
        color: #78715e;
      }

      #nav {
        font-weight: 100;
        background-color: #ece8e4;
      }
      #footer {
        font-weight: 100;
        background-color: #ece8e4;
        padding: 20px;
      }
      .btn-upload {
        text-align: center;

        &:hover {
          background: #e1ddd6;
          color: #fff;
        }
      }
      .box {
        height: 300px;
        width: 100%;
      }

      #file {
        display: none;
      }
    </style>
  </head>

  <body>
    <div>
      <nav
        class="navbar navbar-expand-lg navbar-light"
        style="background-color: #ece8e4"
      >
        <div class="container-fluid">
          <a class="navbar-brand" href="#"
            ><img src="/logo.png" style="height: 40px" alt=""
          /></a>

          <div class="fw-bold d-flex" id="nav">
            <a class="nav-link me-3" aria-current="page" href="/allblog">Home</a>
            <a class="nav-link me-3" href="/blog">Blogging</a>
            <a class="nav-link me-3" href="/myblog">My blog</a>
            <a class="nav-link me-3" href="/myinfo">My info</a>
          </div>
        </div>
      </nav>
      <section>
        <div style="padding: 80px">
          <div
            class="d-flex mb-3 justify-content-between align-items-center"
            style="height: 300px"
          >
            <div style="width: 30%" class="d-flex">
              <label
                style="padding: 80px 10px"
                class="btn-upload box fs-3 rounded-5"
                for="file"
                >ÏÇ¨ÏßÑ Ïò¨Î¶¨Í∏∞</label
              >
              <input type="file" id="file" accept=".png, .jpeg" />
            </div>
            <div style="width: 50%">
              <img
                class="rounded-2"
                style="max-width: 100%; height: auto"
                id="imgbox"
                alt=""
              />
            </div>
          </div>

          <div class="row">
            <div class="mb-3">
              <input
                style="height: 60px"
                type="text"
                class="form-control fs-3"
                id="title"
                placeholder="Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî."
              />
            </div>
            <div class="mb-3">
              <textarea id="summernote" name="editordata"></textarea>
            </div>
            <div style="display: flex; justify-content: end">
              <div style="color: rgb(248, 78, 78); margin: 8px" id="err"></div>
              <button
                type="button"
                onclick="blogging()"
                class="btn btn-lg"
                style="color: white; background-color: #ae7f5f"
              >
                Blogging
              </button>
            </div>
          </div>
        </div>
      </section>
      <footer>
        <div id="footer" style="text-align: center">
          <p>non-blogging | ÏÇ¨ÏóÖÏûêÎì±Î°ùÎ≤àÌò∏ : 000-00-00000</p>
          <p>Ï£ºÏÜå : ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ïö©ÏÇ∞Íµ¨ --Îèô | ÎåÄÌëúÎ≤àÌò∏ 1644-0000</p>
          <p>Copyright(c) 2023 non-blogging. All Rights Reserved.</p>
        </div>
      </footer>

      <script>
        const fileDOM = document.getElementById("file");
        const preview = document.getElementById("imgbox");
        const form = new FormData();

        const blogging = () => {
          document.getElementById("err").innerHTML = "";
          const title = document.getElementById("title").value;
          const content = $("#summernote").summernote("code");
          const userBlog = { title, content, form };

          if (!form.get("file")) {
            document.getElementById("err").innerHTML = "ÏÇ¨ÏßÑÏùÑ Ïò¨Î†§Ï£ºÏÑ∏Ïöî.";
          }
          axios({
            method: "post",
            url: "/post",

            data: userBlog,
          })
            .then((result) => {
              console.log(result);
            })
            .catch((err) => {
              console.log(err);
            });
        };

        $(document).ready(function () {
          $("#summernote").summernote({
            placeholder: "ÎãπÏã†Ïùò Ïù¥ÏïºÍ∏∞Î•º Îì§Î†§Ï£ºÏÑ∏Ïöî.üòä",
            tabsize: 2,
            height: 300,
            lang: "ko-KR",
            toolbar: [
              // [groupName, [list of button]]
              ["style", ["bold", "italic", "underline"]],
              ["font", ["strikethrough"]],

              ["para", ["ul", "ol"]],
            ],
          });
        });

        fileDOM.addEventListener("change", () => {
          const reader = new FileReader();
          reader.onload = ({ target }) => {
            preview.src = target.result;
          };
          reader.readAsDataURL(fileDOM.files[0]);
          const file = fileDOM.files[0];
          if (file) {
            form.append("file", file);
          }
        });
      </script>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"
      ></script>
      <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    </div>
  </body>
</html>
