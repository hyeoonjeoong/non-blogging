<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MyInfo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <style>
    * {
      font-family: "Noto Serif KR", serif;
      
    }
  </style>


  <body style="background-color: #ece8e4; text-align: center;">
    <div style="width: 40%; text-align: center; margin: 10rem auto;">
        <a href="/notebook/allblog">
            <img
              src="/logo.png"
              alt="logo"
              style="height: 4rem; margin-bottom: 1rem"
            />
        </a>
      <div class="form-floating" style="margin-bottom: 1.5rem">
        <input
          type="email"
          class="form-control"
          id="email"
          placeholder="Password"
        />
        <label for="floatingPassword">Email</label>
      </div>
        <div class="form-floating" id="pw" style="margin-bottom:1.5rem; display:none">
          <input
            type="password"
            class="form-control"
            id="password"
            placeholder="Password"
          />
          <label for="floatingPassword">Password</label>
        </div>
        <div class="form-floating" id="pwck" style="margin-bottom: 1.5rem; display:none">
          <input
            type="password"
            class="form-control"
            id="ckPassword"
            placeholder="Password"
          />
          <label for="floatingPassword">Ck password</label>
        </div>
        <div class="form-floating" style="margin-bottom: 1.5rem">
            <input
            type="text"
            class="form-control"
            id="nickname"
            placeholder="Password"
            />
            <label for="floatingPassword">Nickname</label>
        </div>
        <div id="err" style="color: red; font-size:15px; margin-bottom: 0.5rem;"></div>
        <div
          class="btn"
          id="modify"
          style="
            width: 100%;
            background-color: #ae7f5f;
            margin-bottom: 1rem;
            padding: 0.7rem 0;
            border-radius: 20px;
            text-align: center;
            height: 3rem;
            color: white;
          "
          onclick="modify()"
        >
          회원정보 수정하기
        </div>
        <div
        class="btn"
        id="complete"
        style="
        display:none;
          width: 100%;
          border: 2px solid  #ae7f5f;;
          background-color: white;
          margin-bottom: 1rem;
          padding: 0.7rem 0;
          border-radius: 20px;
          text-align: center;
          height: 3rem;
          color: #ae7f5f;
          font-weight:bold;
        "
        onclick="complete()"
      >
        수정 완료
      </div>
        <div
          class="btn"
          style="
            width: 100%;
            background-color: #ae7f5f;
            margin-bottom: 1rem;
            padding: 0.7rem 0;
            border-radius: 20px;
            text-align: center;
            height: 3rem;
            color: white;
          "
          onclick="cancle()"
        >
          취소 하기
        </div>
      </div>

    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script>
      

      const modify = () => {
        document.getElementById('pw').style.display=''
        document.getElementById('pwck').style.display = ''
        document.getElementById('complete').style.display = ''
        document.getElementById('modify').style.display = 'none'
       
      };

      const complete = ()=>{
        const email = document.getElementById('email').value
        const password = document.getElementById('password').value
        const ckPassword = document.getElementById('ckPassword').value
        const nickname = document.getElementById('nickname').value
        const err = document.getElementById('err')
        if(password != ckPassword){
          err.innerHTML ='패스워드는 같아야 합니다.'
          setTimeout(()=>{
            err.innerHTML=''
          },1500)
        }
        if(!email || !password || !ckPassword || !nickname){
          err.innerHTML = '빈칸을 모두 채워주세요.'
          setTimeout(()=>{
            err.innerHTML=''
          },1500)
        }
        if(email.indexOf('@') == -1){
          err.innerHTML = '이메일 형식을 입력해 주세요.'
          setTimeout(()=>{
            err.innerHTML=''
          },1500)
        }

        const userInfo = { email, password, nickname}

        axios.post({
          method:'/user/:userId',
          userInfo
        }).then((result)=>{
          console.log(result)
        }).catch((err)=>{
          console.log(err)
        })

      }

      const cancle = () => {
        location.href = "/notebook/allblog";
      };
    </script>
  </body>
</html>
